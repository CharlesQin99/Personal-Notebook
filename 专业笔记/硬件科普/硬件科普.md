# 硬件科普

## 显示技术的区别

![](pic\1.png)

最常见的显示技术

![](pic\2.png)

### LCD

**原理**

![](pic\3.png)

垂直偏振片：只在垂直方向有分量的偏振光

![](C:\CHARLES\Personal\专业\硬件科普\pic\4.png)

液晶层：控制光线的偏转角度

![](pic\5.png)

彩色滤光片：把白光过滤，利用红绿蓝不同的亮度，混合出彩色

![](pic\6.png)

![](pic\7.png)

LCD的背光是由LED灯带配合匀光板实现的**，所有像素点共用一个背光**（背光是常亮的）

**缺点**

**<u>画面暗色的部分不够暗，深色内容不够深，色彩没有层次（对比度偏低）</u>**

![](pic\9.png)

背光是常亮的，全屏黑色也只是**液晶分子不偏转**，但因为物理性质原因，液晶分子在关合状态也会对光线有轻微偏转，导致一部分光线泄露出去，**LCD屏幕在显示纯黑画面时是亮度大幅降低的灰色而不是纯黑**

> 注意这不是漏光，漏光是指显示器包装或者损坏，**导致背光从显示器边框而不是像素点漏出去**

**产品**

![](pic\10.png)

##### VA

液晶分子默认是竖直的，施加电压后垂直螺旋偏转

![](pic\11.png)

##### IPS

默认是水平的，施加电压后水平偏转

![](pic\12.png)

##### TN

![](pic\13.png)

默认是**水平螺旋，允许光线射出，施加电压后垂直偏转，不允许光线射出**



![](pic\14.png)

​																												对比面板

### QLED背光

LCD的基础上对背光进行改进，**<u>利用蓝光照射不同粒径的量子点材料，会发射出波长不同，颜色不同的光线</u>**

![](pic\15.png)

![](pic\16.png)

**基于这种特性，用两种不同粒径的量子点材料（对应红色和绿色）均匀涂到基板（量子点膜），再有蓝色背光的照射，就能发出纯度非常高的红绿蓝三种颜色**

![](pic\17.png)

### mini-LED

将LCD的一整块背光变为**分区背光**

![](pic\18.png)

**优点**

显示暗色和黑色时可以**单独控制区域背光的变暗或者关闭**，<u>**大幅提高了显示的对比度**</u>

![](pic\19.png)

相比LCD**<u>更容易实现高阶的HDR效果</u>**

![](pic\20.png)

**缺点**

市售miniLED分区背光数量大约500-1000，大量像素点共享一片背光

显示**小范围高亮物体**周边会出现光晕（如鼠标），侧面更明显，但只有个别场景能察觉

![](pic\21.png)

> **绝大多数厂家会提供分区背光等级，在亮度和光晕之间实现平衡**

mini-LED要同时调整背光和液晶层，如果没匹配好就会出现**背光延迟，鼠标移动会有背光拖尾**

![](pic\22.png)

### LED

如夜晚外面大排档的招牌就是LED

![](pic\23.png)

发光二级光：通电越多，亮度越高，组合形成不同的图案，**一个LED只能显示一个颜色**

但因为这样的灯珠太大，所以不适合作为手机和电脑的像素点

基于LED厂商开始研究**微型LED**

### OLED（有机发光二极管）

给一些有机荧光材料通电后会发出各种颜色的光线

先印刷好薄膜电路，化学蒸镀把红绿蓝对应发光材料附在上面，再通电就能发光了

![](pic\25.png)

**优点**

OLED可以**单独控制每个子像素点的亮度和开关**

- 像素级别的分区背光
- 对比度极高，且不存在光晕
- 荧光材料能发出很浓的红绿蓝三色光，色域覆盖非常广
- 没有液晶层，所以厚度很薄，响应速度极快
- 薄膜电路和荧光材料都可以弯曲，实现曲面屏
- 少了常亮背光，功耗比LCD低不少

**缺点**

- 发光材料是有机物，寿命比较短，容易老化
- 红绿蓝三种材料寿命还不一样
- PWM调光和等效分辨率下降问题

![](pic\27.png)

**<u>如果某个像素点长期显示一种颜色，时间一长，对应颜色亮度就会衰减，导致屏幕出现色彩残留和色差（烧屏）</u>**

![](pic\28.png)

因为顾及寿命，绝大多数OLED的峰值亮度很低（<1000nit）

### W-OLED（白色有机发光二极管）

**优点**

缓解烧屏问题

只在薄膜电路上蒸镀白色荧光材料，再加上红绿蓝滤光片，这样三种颜色老化程度差不多

![](pic\29.png)

因为红绿蓝滤光片会过滤一部分光线**，导致显示纯白色的时候亮度不足**，所以WOLED还特地**加了一个白色子像素来提高HDR的峰值**亮度

![](pic\30.png)

**缺点**

**<u>高亮画面下，白色子像素会对红绿蓝像素产生光线串扰，冲淡屏幕色彩（尤其是明亮鲜艳的场景中）</u>**

![](pic\31.png)

### QD-OLED

三星工程师参考QLED，在薄膜电路上**蒸镀只发射蓝色光的荧光材料和一层量子点薄膜**

![](pic\32.png)

通过蓝光激发量子点材料以发射红色和绿色

![](pic\33.png)

**优点**

- 没有了白色子像素点的串扰，高亮度下色域不会减少
- 量子点材料本身能发射更广范围的颜色，所以色彩表现上好很多

![](pic\34.png)

**缺点**

- 没有偏振片的存在，外界的环境光照射到屏幕上也会激发量子点材料，对屏幕本身的光线产生污染，但基本都是在室内使用，没有阳光直射的话问题并不大
- 有机材料使用寿命短

### micro-OLED

将无机材料的LED发光二极管做的足够小，再迁移到屏幕基板上，没有背光和液晶，且可以单独控制像素点的亮度和开关

**优点**

![](pic\36.png)

**缺点**

如何把这么多灯珠整齐摆放和焊接在控制电路上（巨量转移技术），无法低成本完成巨量转移，导致价格很高

## 音频格式

### 无压缩音频格式

***无压缩，体积大***

#### WAV

目前，音频领域最为通用的一种无压缩音频格式就是我们熟知的**Wave（.wav）**格式。Wave格式一开始是专门为Windows系统设计的，支持各种不同的采样率和采样精度。

Wave格式采用**PCM（Pulse-Code Modulation，脉冲编码调制）**对音频进行编码，而PCM遵循**RIFF（Resource Information File Format，资源信息文件格式）**规格，允许把额外的用户信息（如时间码定位信息）嵌入并保存在其中。

这种格式作为数字音频创作领域普遍认可的首选格式，被美国国家录音艺术与科学学会制作人与录音师联盟所采用。

#### AIF


另外一种通用的无压缩音频格式则是一开始为苹果电脑系统设计的**AIFF（.aif，Audio Interchange File，音频交换格式）**。

与Wave类似，AIFF同样支持各种不同的采样率和采样精度，以及额外的用户信息的嵌入和保存。

**感知编码和音频压缩**

***压缩音频，是为了在各种终端间快速地传输音频数据***

无压缩音频格式虽然能够最大程度地保存原始音频的数据，但也正因此，其体积往往是较大的。

为了在各种终端间快速地传输音频数据，一种可以压缩音频文件体积的编码方式——**感知编码（Perceptual Coding）**便出现了。

囿于**掩蔽效应**等各种听觉相关的现象的存在，人类并不是总能听见音频中的所有信息

***感知编码就利用了这一点，将某些不太会被人耳察觉到的声音信息排除在了编码之外。***

由于会排除掉一些声音信息，所以感知编码的过程是有损的，这些被排除掉的声音信息是无法恢复的。为了保证音质，在筛选需要过滤掉的声音信息的过程中往往还会存在一些人为的干预。

压缩编码率的带宽越大，过滤掉的信息就越少，得到的文件的体积就越大；压缩编码率的带宽越小，过滤掉的信息就越多，得到的文件的体积就越小。

### 有损压缩音频格式

如今，常用的应用了感知编码压缩的有损音频格式有**MP3**、**MP4**、**WMA**、**AAC**、**Real Audio、Ogg Vorbis、VQF和AMR**等。

#### MP3，MP4，WMA

***基于标准压缩编码格式MPEG，最常见的格式***

**MPEG（Moving Picture Experts Group，动态图像专家组）**是一种标准压缩编码格式，用于存储和传输音视频。目前其最常见的格式是**ISO MPEG Audio Level-2 Layer-3**，也就是我们常见的**MP3**。

MP3格式编码器由欧洲Fraunhofer研究所和Thomson多媒体公司共同研制，能够在对原音频进行十倍甚至更高的压缩之后仍保持一定的音质。当然，具体音质取决于压缩的码率。MP3是如今应用得最为广泛和认可度最高的一种压缩音频格式。

和MP3一样，**MP4（MPEG-4）**编码如今也大量应用在网络数据流传播和各种终端之中。基于苹果公司的QuickTime "MOV"格式的MP4还拥有编码多声道（环绕声）的能力。

针对于MP3格式，微软公司推出了**WMA（Windows Media Audio）**格式。

WMA可以在低比特率和小体积的情况下实现高质量的音频压缩编码。

> 相比MP3，WMA在一些版权市场更受欢迎，因为**<u>其支持数字版权编码管理（Digital Rights Management）编码。</u>**

#### AAC

***高级音频编码，同时支持版权内容保护***

**AAC（Advanced Audio Coding）**是由杜比实验室、Sony、ATT和Fraunhofer研究所共同研发的一种音频格式。

AAC不仅能对单声道、立体声和5.1环绕声编码，还能用96kHz/24bit的单比特流编码高达48声道的音频。AAC同样支持安全数字音乐协会（Secure Digital Music Initiative）的规范，对有版权的内容进行保护。

#### RealAudio

***适合在线音乐欣赏，可以随网络带宽的不同而改变声音的质量，在多数听众能听到流畅声音的前提下，令带宽较富裕的听众获得较好的音质***

主要适用于在**<u>网络上的在线音乐欣赏</u>**，其格式主要有这么几种：RA（RealAudio）、RM（RealMedia，RealAudio G2）和RMX（RealAudio Secured）等。

![img](https://pic2.zhimg.com/80/v2-7f1aa802504384c8639a478f00e76fa9_720w.webp)

这些格式的特点是可以随网络带宽的不同而改变声音的质量，在多数听众能听到流畅声音的前提下，令带宽较富裕的听众获得较好的音质。

#### OGG(OggVorbis)

***免费，开放，无版权***

完全免费、开放且无专利限制的压缩音频格式，最适合一些无版权的内容的存储和传播。

![img](https://pic1.zhimg.com/80/v2-564a15b9ed0e722c28f92b1f489fe79c_720w.webp)

目前几乎所有音频播放器都能打开ogg文件，包括Windows自带的播放器。

#### VQF

是雅马哈公司开发一种压缩音频格式，其利用了一种减少数据流量但保持音质的方法来达到更高的压缩比。

VQF的音频压缩率比标准的MPEG音频压缩率高出近一倍，可达18:1甚至更高。

> 一首4分钟的歌曲（WAV文件）压成MP3，大约需要4MB左右的硬盘空间，而同一首歌曲，如果使用VQF音频压缩技术的话，那只需要2MB左右的硬盘空间。

#### AMR

***基本只用在语音领域***

***Adaptive Multi-Rate，自适应多速率编码，主要用于移动设备，相对其它的音频格式来说质量比较差***

AMR有两种主要的类型，分别是AMR-NB和AMR-WB，其支持的声音频率范围分别是300－3400Hz和50－7000Hz。

由于其较窄的声音频率范围，AMR基本只在语音领域有较多的应用。

### 无损压缩格式

#### APE

**APE**是与MP3这类有损压缩方式不同的一种无损压缩音频格式，即从音频原始数据文件压缩成APE格式后，**<u>还可以再将APE格式的文件完全还原成未压缩的状态。</u>**

不过，APE的压缩率并不高，一个34MB的WAV文件，压缩为APE格式后，仍有17MB左右。

#### FLAC

***专门针对PCM音频的特点来设计的压缩方式***

一种和APE类似的无损压缩的音频格式，是一种专门针对PCM音频的特点来设计的压缩方式。

FLAC文件的每个数据帧都包含了解码所需的全部信息，并且中间帧的错误不会影响其它帧的正常播放。

目前在国内的无损音频的市场上，FLAC和APE都是比较受欢迎的格式，但**是FLAC因其特殊的编码原理，已经显现出了超越APE成为最主流的无损音频格式的趋势。**

# Gsync/Freesync/垂直同步

**视觉暂留效应：visual retention effect**。例如小人书，就是利用画面会在视网膜上暂留，让其消失之前播放出来，画面就是连续的了。

**FPS：每秒展示的帧数**

## 逐行扫描

***逐行扫描的速度就是屏幕的刷新率***

显卡将每帧传输到显示器，显示器利用**逐行扫描（左上到右下）**展示帧。

**VBlank**：扫描点从右下回到左上

**<u>例如：60HZ刷新率就是一秒钟60次全画幅的逐行扫描</u>**

> 所以刷新率越高，表现的帧数越多，画面延迟越低，画面越流畅

## 帧数和刷新率

- **帧数**：显卡一秒钟渲染好并发送给显示器画面数
- **刷新率**：显示器逐行扫描的速度

## 帧缓存

**帧缓存**：**<u>为了让波动的输出帧匹配显示器刷新率</u>**。因为不同画面对显卡本身运算压力不同，**所以帧数一直在变，而显示器的刷新率不变。**

**后缓存和前缓存**：显卡渲染时，**先写入后缓存，后缓存写完，前后缓存交换（*帧传递*）**，即显示器读取前缓存，显卡写入后缓存，然后前后帧交换数据。

- **画面撕裂：<u>帧数和刷新率不匹配</u>**
1. 帧数 > 刷新率：**显卡在显示器进行逐行扫描前就提前画好了新的帧，并进行了帧传递，画面持续撕裂**。![](pic\191.png)
2. 帧数 < 刷新率：**画面跟进速度比显示器慢，显示器经常显示过往的帧**。![](pic\192.png)

## 垂直同步 Vertical Synchronization

***为了解决画面撕裂*（让显卡等显示器）**

原理：画面撕裂是因为显卡帧数和显示器刷新率不匹配造成的。**垂直同步强制帧传递发生在VBlank阶段。**

> **<u>所以打开垂直同步后，帧率会被锁定在显示器的最大刷新率下</u>**。因为显卡需要等待显示器刷新才会进行帧传递。

### 自适应垂直同步 Adapative V-Sync

NVIDIA推出的了解决方案：针对显卡性能很差，如果显卡的帧率低于显示器刷新率时候会让显示器重复显示前缓存，造成刷新率降低。

根据显卡帧数进行自适应调整，如对于60Hz刷新率的显示器，显卡帧数大于60时候开启垂直同步；如果帧数小于60就关闭垂直同步，即显卡渲染好就立刻交替前后缓存的画面。

![](pic\193.png)

垂直同步的弊端：延迟，显卡渲染完后需要等待显示器完成逐行扫描，如果此时游戏场景变化不能立刻显示出来，则会出现滞后现象（还会产生鼠标延迟）

### 三重缓冲 Triple Buffer

在原来的前后缓冲中间加一层**中缓存**，但如果显示器刷新率显著低于显卡的帧率，则中缓存和后缓存都渲染完了，逐行扫描还没结束，则还会出现延迟现象。

![](pic\194.png)

### 快速垂直同步（无阻塞垂直同步）

***解决垂直同步和三重缓冲导致的延迟***

在三重缓冲的基础上允许中缓存和后缓存交替，**后缓存只和中缓存交替**，不会影响前缓存的画面。显示器永远有一张完整中缓存可以交替前缓存，所以画面永远不会撕裂。

**正是因为显卡不用等待显示器，所以也叫无阻塞垂直同步。**

**弊端**：**部分过往帧被显卡覆写后抛弃了**，形成跳帧（帧生成之间不均匀）现象导致的卡顿

## G-Sync和Free-Sync

***自适应显示器刷新率，简称VRR***

**原理：通过调整VBlank来调整显示器刷新率，让显示器刷新率动态匹配显卡的输出帧率**

> VRR适用于**帧率低于但接近显示器刷新率**，且帧生成之间稳定才能获得比较好的效果

**帧率高于刷新率：**

显卡渲染好后由于没有垂直同步立刻发生帧传递，还是会发生画面撕裂。

所以官方推荐打开G-Sync和Free-Sync的同时，要么锁帧低于显示器2-4帧，要么打开垂直同步（不推荐）

**帧率低于刷新率：**

显示器需要大幅延长VBlank的时间，大幅度降低刷新率，会出现卡顿和显示错误

**低帧补偿 Low Frame Compensatio**

***让刷新率变成帧率的整数倍，让整数倍刷新显示一帧画面，但<u>需要提前预测显卡的输出效率</u>**

### 区别

- **G-Sync：**一开始显示器没有自适应刷新率，**NVIDIA和显示器厂商配合**，**在显示器内植入一颗芯片，来完成自适应垂直同步功能。这个功能需要付费授权，所以支持这个技术的显示器都价格不菲，且只有N卡可以用。**
- **Free-Sync：DP接口中的一个附加协议，AMD的显卡直接沿用**，由于不用独立芯片和付费授权，所以基本显示器能上这个技术就上。但**由于显示器"体质"不同，所以开启Free-Sync效果参次不齐。**

总结：工作原理和实现效果一样，**不过G-Sync有NVIDIA官方认证的品控（NV官方认证），所以显示质量有保证。Free-Sync就看显示器体质了，运气好就显示效果好，运气差体验就差。**

## 后续

第二代G-Sync增加了HDR的支持，N卡在驱动中也开放了对Free-Sync的支持，所以重新进行了分级：

1. **G-Sync ULTIMATE：支持HDR最高标准的G-Sync**
2. **G-Sync：原G-Sync**
3. **G-Sync Compatible：原Free-Sync**

第二代Free-Sync也增加了对HDR的支持来对抗G-Sync ULTIMATE

